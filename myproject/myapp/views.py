from django.shortcuts import render, redirect
from django.core.mail import send_mail
from django.urls import reverse
from .models import Persona
from .forms import PersonaForm
from django.http import HttpResponse
import datetime
from django.conf import settings
import os
from django.http import JsonResponse



def inicio(request):
    return render(request, 'paginas/inicio.html')

def imc_por_edad(request):
    #personas = Persona.objects.all()
    personas = Persona.objects.all().values('unidad', 'imc')
    #context = {'personas': list(personas)}
    context = {'personas': personas, }
    return render(request, 'imc_por_edad.html', context)
    #return JsonResponse(list(personas), safe=False)
    #return JsonResponse(list(personas), safe=False)
    



def calcular_imc(peso, altura):
    return peso / (altura ** 2)



def determinar_estado(imc, edad):
    # sourcery skip: merge-else-if-into-elif, remove-redundant-if
    if edad < 18:
        if imc < 18.5:
            return "Bajo peso"
        elif imc >= 18.5 and imc < 25:
            return "Peso normal"
        else:
            return "Sobrepeso"
    else:
        if imc < 18.5:
            return "Bajo peso"
        elif imc >= 18.5 and imc < 25:
            return "Peso normal"
        elif imc >= 25 and imc < 30:
            return "Sobrepeso"
        else:
            return "Obesidad"

def calcular_metabolismo_basal(peso, altura, edad, genero):
    if genero == 'M':
        return 88.362 + (13.397 * peso) + (4.799 * altura * 100) - (5.677 * edad)
    else:
        return 447.593 + (9.247 * peso) + (3.098 * altura * 100) - (4.330 * edad)


#para flexiones y abdominales
"""""
notas_mujeres = {
    '20-24': [(50,100), (49,99),(48,98), (47, 97), (46,96), (45,95),(44,94),(43,93),(42,92), (41,91),
                  (40, 90), (39, 89),( 38, 88),( 37, 87),( 36, 86),( 35,85 ),(34,84 ),(33,83 ),(32,82 ),(31,81),( 30,80),( 29,79),( 28,78),( 27,77),( 26,76),( 25,75),( 24,74),( 23,73),(
                  22,72),( 21,71),( 20,70),( 19,69),( 18,68),( 17,67),( 16,66),( 15,65),( 14,64),( 13,63),( 12,62),( 11,61),( 10,59),( 9,58),( 8,57),( 7,56),( 6,55),( 5,54),( 4,53),(
                  3,52),( 2,51),( 1,50)],
    '25-29': [(45,100) ,(44,99 ),(43,98 ),(42,97) ,(41,96 ),(40,95 ),(39,94 ),(38,93 ),(37,92 ),(36,91),(
                  35,90 ),(34,89 ),(33,88 ),(32,87 ),(31,86),( 30,85),( 29,84),( 28,83),( 27,82),( 26,81),( 25,80),( 24,79),( 23,78),(
                  22,77),( 21,76),( 20,75),( 19,74),( 18,73),( 17,72),( 16,71),( 15,70),( 14,69),( 13,68),( 12,67),( 11,66),( 10,65),( 9,64),( 8,63),( 7,62),( 6,61),( 5,60),( 4,59),(
                  3,58),( 2,57),( 1,56)
                  ],
    '30-34': [(40,100 ),(39,99 ),(38,98 ),(37,97 ),(36,96 ),(35,95 ),(34,94),(33,93 ),(32,92),(31,91),(
                  30,90 ),(29,89 ),(28,88 ),(27,87 ),(26,86),( 25,85),( 24,84),( 23,83),( 22,82),( 21,81),( 20,80),( 19,79),( 18,78),(
                  17,77),( 16,76),( 15,75),( 14,74),( 13,73),( 12,72),( 11,71),( 10,70),( 9,69),( 8,68),( 7,67),( 6,66),( 5,65),( 4,64),( 3,63),( 2,62),( 1,61)
                  ],
    '35-39': [(35,100),(34,99 ),(33,98 ),(32,97 ),(31,96 ),(30,95 ),(29,94 ),(28,93 ),(27,92),(26,91),(
                  25,90 ),(24,89 ),(23,88 ),(22,87 ),(21,86),( 20,85),( 19,84),( 18,83),( 17,82),( 16,81),( 15,80),( 14,79),( 13,78),(
                  12,77),( 11,76),( 10,75),( 9,74),( 8,73),( 7,72),( 6,71),( 5,70),( 4,69),( 3,68),( 2,67),( 1,66)
                  ],
    '40-44': [(30,100) ,(29,99 ),(28,98 ),(27,97),(26,96 ),(25,95 ),(24,94 ),(23,93 ),(22,92 ),(21,91),(
                  20,90 ),(19,89 ),(18,88 ),(17,87 ),(16,86),( 15,85),( 14,84),( 13,83),( 12,82),( 11,81),( 10,80),( 9,79),( 8,78),(
                  7,77),( 6,76),( 5,75),( 4,74),( 3,73),( 2,72),( 1,71)
                  ],
    '45-49': [(25,100) ,(24,99 ),(23,98),(22,97) ,(21,96 ),(20,95 ),(19,94 ),(18,93 ),(17,92 ),(16,91),(
                  15,90 ),(14,89 ),(13,88 ),(12,87 ),(11,86),( 10,85),( 9,84),( 8,83),( 7,82),( 6,81),( 5,80),( 4,79),( 3,78),(
                  2,77),( 1,76)
                  ],
    '50-99':  [(20,100),(19,99) ,(18,98) ,(17,97),(16,96),(15,95),(14,94),(13,93 ),(12,92 ),(11,91),(
                  10,90 ),(9,89 ),(8,88 ),(7,87 ),(6,86),( 5,85),( 4,84),( 3,83),( 2,82),( 1,81) ]
        
        
}

notas_hombres = {
    '20-24': [(70, 100),( 69, 99),( 68, 98),( 67, 97),( 66, 96),( 65, 95),( 64, 94),( 63, 93),( 62, 92),( 61, 91),(
                  60, 90),( 59, 89),( 58, 88),( 57, 87),( 56, 86),( 55,85 ),(54,84 ),(53,83 ),(52,82 ),(51,81),( 50,80),( 49,79),( 48,78),( 47,77),( 46,76),( 45,75),( 44,74),( 43,73),(
                  42,72),( 41,71),( 40,70),( 39,69),( 38,68),( 37,67),( 36,66),( 35,65),( 34,64),( 33,63),( 32,62),( 31,61),( 30,60),( 29,59),( 28,58),( 27,57),( 26,56),( 25,55),( 24,54),(
                  23,53),( 22,52),( 21,51),( 20,50),( 19,49),( 18,48),( 17,47),( 16,46),( 15,45),( 14,44),( 13,43),( 12,42),( 11,41),( 10,40),( 9,39),( 8,38),( 7,37),( 6,36),( 5,35),(
                  4,34),( 3,33),( 2,32),( 1,31)],
    '25-29': [(65,100 ),(64,99 ),(63,98 ),(62,97 ),(61,96 ),(60,95 ),(59,94 ),(58,93 ),(57,92 ),(56,91),(
                  55,90 ),(54,89 ),(53,88 ),(52,87 ),(51,86),( 50,85),( 49,84),( 48,83),( 47,82),( 46,81),( 45,80),( 44,79),( 43,78),(
                  42,77),( 41,76),( 40,75),( 39,74),( 38,73),( 37,72),( 36,71),( 35,70),( 34,69),( 33,68),( 32,67),( 31,66),( 30,65),( 29,64),( 28,63),( 27,62),( 26,61),( 25,60),( 24,59),(
                  23,58),( 22,57),( 21,56),( 20,55),( 19,54),( 18,53),( 17,52),( 16,51),( 15,50),( 14,49),( 13,48),( 12,47),( 11,46),( 10,45),( 9,44),( 8,43),( 7,42),( 6,41),( 5,40),(
                  4,39),( 3,38),( 2,37),( 1,36)
                  ],
    '30-34': [(60,100 ),(59,99 ),(58,98 ),(57,97 ),(56,96 ),(55,95 ),(54,94 ),(53,93 ),(52,92 ),(51,91),(
                  50,90 ),(49,89 ),(48,88 ),(47,87 ),(46,86),( 45,85),( 44,84),( 43,83),( 42,82),( 41,81),( 40,80),( 39,79),( 38,78),(
                  37,77),( 36,76),( 35,75),( 34,74),( 33,73),( 32,72),( 31,71),( 30,70),( 29,69),( 28,68),( 27,67),( 26,66),( 25,65),( 24,64),( 23,63),( 22,62),( 21,61),( 
                  20,60),( 19,59),( 18,58),( 17,57),( 16,56),( 15,55),( 14,54),( 13,53),( 12,52),( 11,51),( 10,50),( 9,49),( 8,48),( 7,47),( 6,46),( 5,45),(
                  4,44),( 3,43),( 2,42),( 1,41)
                  ],
    '35-39': [(55,100 ),(54,99 ),(53,98 ),(52,97 ),(51,96 ),(50,95 ),(49,94 ),(48,93 ),(47,92 ),(46,91),(
                  45,90 ),(44,89 ),(43,88 ),(42,87 ),(41,86),( 40,85),( 39,84),( 38,83),( 37,82),( 36,81),( 35,80),( 34,79),( 33,78),(
                  32,77),( 31,76),( 30,75),( 29,74),( 28,73),( 27,72),( 26,71),( 25,70),( 24,69),( 23,68),( 22,67),( 21,66),( 20,65),( 19,64),( 
                  18,63),( 17,62),( 16,61),( 15,60),( 14,59),( 13,58),( 12,57),( 11,56),( 10,55),( 9,54),( 8,53),( 7,52),( 6,51),( 5,50),(
                  4,49),( 3,48),( 2,47),( 1,46)
                  ],
    '40-44': [(50,100 ),(49,99 ),(48,98 ),(47,97 ),(46,96 ),(45,95 ),(44,94 ),(43,93 ),(42,92 ),(41,91),(
                  40,90 ),(39,89 ),(38,88 ),(37,87 ),(36,86),( 35,85),( 34,84),( 33,83),( 32,82),( 31,81),( 30,80),( 29,79),( 28,78),(
                  27,77),( 26,76),( 25,75),( 24,74),( 23,73),( 22,72),( 21,71),( 20,70),( 19,69),( 18,68),( 17,67),( 16,66),( 15,65),( 14,64),( 
                  13,63),( 12,62),( 11,61),( 10,60),( 9,59),( 8,58),( 7,57),( 6,56),( 5,55),( 4,54),( 3,53),( 2,52),( 1,51)
                  ],
    '45-49': [(45,100 ),(44,99 ),(43,98 ),(42,97 ),(41,96 ),(40,95 ),(39,94 ),(38,93 ),(37,92 ),(36,91),(
                  35,90 ),(34,89 ),(33,88 ),(32,87 ),(31,86),( 30,85),( 29,84),( 28,83),( 27,82),( 26,81),( 25,80),( 24,79),( 23,78),(
                  22,77),( 21,76),( 20,75),( 19,74),( 18,73),( 17,72),( 16,71),( 15,70),( 14,69),( 13,68),( 12,67),( 11,66),( 10,65),( 9,64),( 
                  8,63),( 7,62),( 6,61),( 5,60),( 4,59),( 3,58),( 2,57),( 1,56)
                  ],
    '50-99':   [(40,100 ),(39,99 ),(38,98 ),(37,97 ),(36,96 ),(35,95 ),(34,94 ),(33,93 ),(32,92 ),(31,91),(
                  30,90 ),(29,89 ),(28,88 ),(27,87 ),(26,86),( 25,85),( 24,84),( 23,83),( 22,82),( 21,81),( 20,80),( 19,79),( 18,78),(
                  17,77),( 16,76),( 15,75),( 14,74),( 13,73),( 12,72),( 11,71),( 10,70),( 9,69),( 8,68),( 7,67),( 6,66),( 5,65),( 4,64),( 
                  3,63),( 2,62),( 1,61) ]
    
}
"""
notas_mujeres = {
    '20-24': {50: 100, 49: 99,48: 98, 47: 97, 46: 96, 45: 95,44: 94,43: 93,42: 92, 41: 91,
                  40: 90, 39: 89,38: 88,37: 87,36: 86, 35: 85 ,34: 84 ,33: 83 ,32: 82,31: 81, 30: 80, 29: 79, 28: 78, 27: 77, 26: 76, 25: 75, 24: 74, 23: 73,
                  22: 72, 21: 71, 20: 70, 19: 69, 18: 68, 17: 67, 16: 66, 15:65, 14: 64, 13: 63, 12: 62, 11: 61, 10: 59, 9: 58, 8: 57, 7: 56, 6: 55, 5:54, 4: 53,
                  3: 52, 2: 51, 1: 50},
    '25-29': {45:100 ,44: 99 ,43: 98 ,42: 97 ,41: 96 ,40: 95 ,39: 94 ,38: 93 ,37: 92 ,36: 91,
                  35:90 ,34: 89 ,33: 88 ,32: 87 ,31: 86, 30: 85, 29: 84, 28: 83, 27: 82, 26: 81, 25:80, 24: 79, 23: 78,
                  22: 77, 21: 76, 20: 75, 19: 74, 18: 73, 17: 72, 16: 71, 15:70, 14: 69, 13: 68, 12: 67, 11: 66, 10: 65, 9: 64, 8: 63, 7: 62, 6: 61, 5:60, 4: 59,
                  3: 58, 2: 57, 1: 56
                  },
    '30-34': {40: 100 ,39: 99 ,38: 98 ,37: 97 ,36: 96 ,35:95 ,34: 94,33: 93 ,32: 92,31: 91,
                  30: 90 ,29: 89 ,28: 88 ,27: 87 ,26: 86, 25:85, 24: 84, 23: 83, 22: 82, 21: 81, 20: 80, 19: 79, 18: 78,
                  17: 77, 16: 76, 15:75, 14: 74, 13: 73, 12: 72, 11: 71, 10: 70, 9: 69, 8: 68, 7: 67, 6: 66, 5:65, 4: 64, 3: 63, 2: 62, 1: 61
                  },
    '35-39': {35:100,34: 99 ,33: 98 ,32: 97 ,31: 96 ,30: 95 ,29: 94 ,28: 93 ,27: 92,26: 91,
                  25:90 ,24: 89 ,23: 88 ,22: 87 ,21: 86, 20: 85, 19: 84, 18: 83, 17: 82, 16: 81, 15:80, 14: 79, 13: 78,
                  12: 77, 11: 76, 10: 75, 9: 74, 8: 73, 7: 72, 6: 71, 5:70, 4: 69, 3: 68, 2: 67, 1: 66
                  },
    '40-44': {30: 100 ,29: 99 ,28: 98 ,27: 97,26: 96 ,25:95 ,24: 94 ,23: 93 ,22: 92 ,21: 91,
                  20: 90 ,19: 89 ,18: 88 ,17: 87 ,16: 86, 15:85, 14: 84, 13: 83, 12: 82, 11: 81, 10: 80, 9: 79, 8: 78,
                  7: 77, 6: 76, 5:75, 4: 74, 3: 73, 2: 72, 1: 71
                  },
    '45-49': {25:100 ,24: 99 ,23: 98,22: 97 ,21: 96 ,20: 95 ,19: 94 ,18: 93 ,17: 92 ,16: 91,
                  15:90 ,14: 89 ,13: 88 ,12: 87 ,11: 86, 10: 85, 9: 84, 8: 83, 7: 82, 6: 81, 5:80, 4: 79, 3: 78,
                  2: 77, 1: 76
                  },
    '50-99':  {20: 100,19: 99 ,18: 98 ,17: 97,16: 96,15:95,14: 94,13: 93 ,12: 92 ,11: 91,
                  10: 90 ,9: 89 ,8: 88 ,7: 87 ,6: 86, 5:85, 4: 84, 3: 83, 2: 82, 1: 81 }
        
        
}

notas_hombres = {
    '20-24': {70: 100, 69: 99, 68: 98, 67: 97, 66: 96, 65: 95, 64: 94, 63:  93, 62:  92, 61:  91,
                  60:  90, 59:  89, 58: 88, 57:  87, 56: 86, 55: 85 ,54: 84 ,53: 83 ,52: 82 ,51: 81, 50: 80, 49: 79, 48: 78, 47: 77, 46: 76, 45: 75, 44: 74, 43: 73,
                  42: 72, 41: 71, 40: 70, 39: 69, 38: 68, 37: 67, 36: 66, 35: 65, 34: 64, 33: 63, 32: 62, 31: 61, 30: 60, 29: 59, 28: 58, 27: 57, 26: 56, 25: 55, 24: 54,
                  23: 53, 22: 52, 21: 51, 20: 50, 19: 49, 18: 48, 17: 47, 16: 46, 15: 45, 14: 44, 13: 43, 12: 42, 11: 41, 10: 40, 9: 39, 8: 38, 7: 37, 6: 36, 5: 35,
                  4: 34, 3: 33, 2: 32, 1: 31},
    '25-29': {65: 100 ,64: 99 ,63: 98 ,62: 97 ,61: 96 ,60: 95 ,59: 94 ,58: 93 ,57: 92 ,56: 91,
                  55: 90 ,54: 89 ,53: 88 ,52: 87 ,51: 86, 50: 85, 49: 84, 48: 83, 47: 82, 46: 81, 45: 80, 44: 79, 43: 78,
                  42: 77, 41: 76, 40: 75, 39: 74, 38: 73, 37: 72, 36: 71, 35: 70, 34: 69, 33: 68, 32: 67, 31: 66, 30: 65, 29: 64, 28: 63, 27: 62, 26: 61, 25: 60, 24: 59,
                  23: 58, 22: 57, 21: 56, 20: 55, 19: 54, 18: 53, 17: 52, 16: 51, 15: 50, 14: 49, 13: 48, 12: 47, 11: 46, 10: 45, 9: 44, 8: 43, 7: 42, 6: 41, 5: 40,
                  4: 39, 3: 38, 2: 37, 1: 36
                  },
    '30-34': {60: 100 ,59: 99 ,58: 98 ,57: 97 ,56: 96 ,55: 95 ,54: 94 ,53: 93 ,52: 92 ,51: 91,
                  50: 90 ,49: 89 ,48: 88 ,47: 87 ,46: 86, 45: 85, 44: 84, 43: 83, 42: 82, 41: 81, 40: 80, 39: 79, 38: 78,
                  37: 77, 36: 76, 35: 75, 34: 74, 33: 73, 32: 72, 31: 71, 30: 70, 29: 69, 28: 68, 27: 67, 26: 66, 25: 65, 24: 64, 23: 63, 22: 62, 21: 61, 
                  20: 60, 19: 59, 18: 58, 17: 57, 16: 56, 15: 55, 14: 54, 13: 53, 12: 52, 11: 51, 10: 50, 9: 49, 8: 48, 7: 47, 6: 46, 5: 45,
                  4: 44, 3: 43, 2: 42, 1: 41
                  },
    '35-39': {55: 100 ,54: 99 ,53: 98 ,52: 97 ,51: 96 ,50: 95 ,49: 94 ,48: 93 ,47: 92 ,46: 91,
                  45: 90 ,44: 89 ,43: 88 ,42: 87 ,41: 86, 40: 85, 39: 84, 38: 83, 37: 82, 36: 81, 35: 80, 34: 79, 33: 78,
                  32: 77, 31: 76, 30: 75, 29: 74, 28: 73, 27: 72, 26: 71, 25: 70, 24: 69, 23: 68, 22: 67, 21: 66, 20: 65, 19: 64, 
                  18: 63, 17: 62, 16: 61, 15: 60, 14: 59, 13: 58, 12: 57, 11: 56, 10: 55, 9: 54, 8: 53, 7: 52, 6: 51, 5: 50,
                  4: 49, 3: 48, 2: 47, 1: 46
                  },
    '40-44': {50: 100 ,49: 99 ,48: 98 ,47: 97 ,46: 96 ,45: 95 ,44: 94 ,43: 93 ,42: 92 ,41: 91,
                  40: 90 ,39: 89 ,38: 88 ,37: 87 ,36: 86, 35: 85, 34: 84, 33: 83, 32: 82, 31: 81, 30: 80, 29: 79, 28: 78,
                  27: 77, 26: 76, 25: 75, 24: 74, 23: 73, 22: 72, 21: 71, 20: 70, 19: 69, 18: 68, 17: 67, 16: 66, 15: 65, 14: 64, 
                  13: 63, 12: 62, 11: 61, 10: 60, 9: 59, 8: 58, 7: 57, 6: 56, 5: 55, 4: 54, 3: 53, 2: 52, 1: 51
                  },
    '45-49': {45: 100 ,44: 99 ,43: 98 ,42: 97 ,41: 96 ,40: 95 ,39: 94 ,38: 93 ,37: 92 ,36: 91,
                  35: 90 ,34: 89 ,33: 88 ,32: 87 ,31: 86, 30: 85, 29: 84, 28: 83, 27: 82, 26: 81, 25: 80, 24: 79, 23: 78,
                  22: 77, 21: 76, 20: 75, 19: 74, 18: 73, 17: 72, 16: 71, 15: 70, 14: 69, 13: 68, 12: 67, 11: 66, 10: 65, 9: 64, 
                  8: 63, 7: 62, 6: 61, 5: 60, 4: 59, 3: 58, 2: 57, 1: 56
                  },
    '50-99':   {40: 100 ,39: 99 ,38: 98 ,37: 97 ,36: 96 ,35: 95 ,34: 94 ,33: 93 ,32: 92 ,31: 91,
                  30: 90 ,29: 89 ,28: 88 ,27: 87 ,26: 86, 25: 85, 24: 84, 23: 83, 22: 82, 21: 81, 20: 80, 19: 79, 18: 78,
                  17: 77, 16: 76, 15: 75, 14: 74, 13: 73, 12: 72, 11: 71, 10: 70, 9: 69, 8: 68, 7: 67, 6: 66, 5: 65, 4: 64, 
                  3: 63, 2: 62, 1: 61 }
    
}

notas_mujeres_flex = {
    '20-24': {50: 100, 49: 99,48: 98, 47: 97, 46: 96, 45: 95,44: 94,43: 93,42: 92, 41: 91,
                  40: 90, 39: 89,38: 88,37: 87,36: 86, 35: 85 ,34: 84 ,33: 83 ,32: 82,31: 81, 30: 80, 29: 79, 28: 78, 27: 77, 26: 76, 25: 75, 24: 74, 23: 73,
                  22: 72, 21: 71, 20: 70, 19: 69, 18: 68, 17: 67, 16: 66, 15:65, 14: 64, 13: 63, 12: 62, 11: 61, 10: 59, 9: 58, 8: 57, 7: 56, 6: 55, 5:54, 4: 53,
                  3: 52, 2: 51, 1: 50},
    '25-29': {45:100 ,44: 99 ,43: 98 ,42: 97 ,41: 96 ,40: 95 ,39: 94 ,38: 93 ,37: 92 ,36: 91,
                  35:90 ,34: 89 ,33: 88 ,32: 87 ,31: 86, 30: 85, 29: 84, 28: 83, 27: 82, 26: 81, 25:80, 24: 79, 23: 78,
                  22: 77, 21: 76, 20: 75, 19: 74, 18: 73, 17: 72, 16: 71, 15:70, 14: 69, 13: 68, 12: 67, 11: 66, 10: 65, 9: 64, 8: 63, 7: 62, 6: 61, 5:60, 4: 59,
                  3: 58, 2: 57, 1: 56
                  },
    '30-34': {40: 100 ,39: 99 ,38: 98 ,37: 97 ,36: 96 ,35:95 ,34: 94,33: 93 ,32: 92,31: 91,
                  30: 90 ,29: 89 ,28: 88 ,27: 87 ,26: 86, 25:85, 24: 84, 23: 83, 22: 82, 21: 81, 20: 80, 19: 79, 18: 78,
                  17: 77, 16: 76, 15:75, 14: 74, 13: 73, 12: 72, 11: 71, 10: 70, 9: 69, 8: 68, 7: 67, 6: 66, 5:65, 4: 64, 3: 63, 2: 62, 1: 61
                  },
    '35-39': {35:100,34: 99 ,33: 98 ,32: 97 ,31: 96 ,30: 95 ,29: 94 ,28: 93 ,27: 92,26: 91,
                  25:90 ,24: 89 ,23: 88 ,22: 87 ,21: 86, 20: 85, 19: 84, 18: 83, 17: 82, 16: 81, 15:80, 14: 79, 13: 78,
                  12: 77, 11: 76, 10: 75, 9: 74, 8: 73, 7: 72, 6: 71, 5:70, 4: 69, 3: 68, 2: 67, 1: 66
                  },
    '40-44': {30: 100 ,29: 99 ,28: 98 ,27: 97,26: 96 ,25:95 ,24: 94 ,23: 93 ,22: 92 ,21: 91,
                  20: 90 ,19: 89 ,18: 88 ,17: 87 ,16: 86, 15:85, 14: 84, 13: 83, 12: 82, 11: 81, 10: 80, 9: 79, 8: 78,
                  7: 77, 6: 76, 5:75, 4: 74, 3: 73, 2: 72, 1: 71
                  },
    '45-49': {25:100 ,24: 99 ,23: 98,22: 97 ,21: 96 ,20: 95 ,19: 94 ,18: 93 ,17: 92 ,16: 91,
                  15:90 ,14: 89 ,13: 88 ,12: 87 ,11: 86, 10: 85, 9: 84, 8: 83, 7: 82, 6: 81, 5:80, 4: 79, 3: 78,
                  2: 77, 1: 76
                  },
    '50-99':  {20: 100,19: 99 ,18: 98 ,17: 97,16: 96,15:95,14: 94,13: 93 ,12: 92 ,11: 91,
                  10: 90 ,9: 89 ,8: 88 ,7: 87 ,6: 86, 5:85, 4: 84, 3: 83, 2: 82, 1: 81 }
        
        
}

notas_hombres_flex = {
    '20-24': {70: 100, 69: 99, 68: 98, 67: 97, 66: 96, 65: 95, 64: 94, 63:  93, 62:  92, 61:  91,
                  60:  90, 59:  89, 58: 88, 57:  87, 56: 86, 55: 85 ,54: 84 ,53: 83 ,52: 82 ,51: 81, 50: 80, 49: 79, 48: 78, 47: 77, 46: 76, 45: 75, 44: 74, 43: 73,
                  42: 72, 41: 71, 40: 70, 39: 69, 38: 68, 37: 67, 36: 66, 35: 65, 34: 64, 33: 63, 32: 62, 31: 61, 30: 60, 29: 59, 28: 58, 27: 57, 26: 56, 25: 55, 24: 54,
                  23: 53, 22: 52, 21: 51, 20: 50, 19: 49, 18: 48, 17: 47, 16: 46, 15: 45, 14: 44, 13: 43, 12: 42, 11: 41, 10: 40, 9: 39, 8: 38, 7: 37, 6: 36, 5: 35,
                  4: 34, 3: 33, 2: 32, 1: 31},
    '25-29': {65: 100 ,64: 99 ,63: 98 ,62: 97 ,61: 96 ,60: 95 ,59: 94 ,58: 93 ,57: 92 ,56: 91,
                  55: 90 ,54: 89 ,53: 88 ,52: 87 ,51: 86, 50: 85, 49: 84, 48: 83, 47: 82, 46: 81, 45: 80, 44: 79, 43: 78,
                  42: 77, 41: 76, 40: 75, 39: 74, 38: 73, 37: 72, 36: 71, 35: 70, 34: 69, 33: 68, 32: 67, 31: 66, 30: 65, 29: 64, 28: 63, 27: 62, 26: 61, 25: 60, 24: 59,
                  23: 58, 22: 57, 21: 56, 20: 55, 19: 54, 18: 53, 17: 52, 16: 51, 15: 50, 14: 49, 13: 48, 12: 47, 11: 46, 10: 45, 9: 44, 8: 43, 7: 42, 6: 41, 5: 40,
                  4: 39, 3: 38, 2: 37, 1: 36
                  },
    '30-34': {60: 100 ,59: 99 ,58: 98 ,57: 97 ,56: 96 ,55: 95 ,54: 94 ,53: 93 ,52: 92 ,51: 91,
                  50: 90 ,49: 89 ,48: 88 ,47: 87 ,46: 86, 45: 85, 44: 84, 43: 83, 42: 82, 41: 81, 40: 80, 39: 79, 38: 78,
                  37: 77, 36: 76, 35: 75, 34: 74, 33: 73, 32: 72, 31: 71, 30: 70, 29: 69, 28: 68, 27: 67, 26: 66, 25: 65, 24: 64, 23: 63, 22: 62, 21: 61, 
                  20: 60, 19: 59, 18: 58, 17: 57, 16: 56, 15: 55, 14: 54, 13: 53, 12: 52, 11: 51, 10: 50, 9: 49, 8: 48, 7: 47, 6: 46, 5: 45,
                  4: 44, 3: 43, 2: 42, 1: 41
                  },
    '35-39': {55: 100 ,54: 99 ,53: 98 ,52: 97 ,51: 96 ,50: 95 ,49: 94 ,48: 93 ,47: 92 ,46: 91,
                  45: 90 ,44: 89 ,43: 88 ,42: 87 ,41: 86, 40: 85, 39: 84, 38: 83, 37: 82, 36: 81, 35: 80, 34: 79, 33: 78,
                  32: 77, 31: 76, 30: 75, 29: 74, 28: 73, 27: 72, 26: 71, 25: 70, 24: 69, 23: 68, 22: 67, 21: 66, 20: 65, 19: 64, 
                  18: 63, 17: 62, 16: 61, 15: 60, 14: 59, 13: 58, 12: 57, 11: 56, 10: 55, 9: 54, 8: 53, 7: 52, 6: 51, 5: 50,
                  4: 49, 3: 48, 2: 47, 1: 46
                  },
    '40-44': {50: 100 ,49: 99 ,48: 98 ,47: 97 ,46: 96 ,45: 95 ,44: 94 ,43: 93 ,42: 92 ,41: 91,
                  40: 90 ,39: 89 ,38: 88 ,37: 87 ,36: 86, 35: 85, 34: 84, 33: 83, 32: 82, 31: 81, 30: 80, 29: 79, 28: 78,
                  27: 77, 26: 76, 25: 75, 24: 74, 23: 73, 22: 72, 21: 71, 20: 70, 19: 69, 18: 68, 17: 67, 16: 66, 15: 65, 14: 64, 
                  13: 63, 12: 62, 11: 61, 10: 60, 9: 59, 8: 58, 7: 57, 6: 56, 5: 55, 4: 54, 3: 53, 2: 52, 1: 51
                  },
    '45-49': {45: 100 ,44: 99 ,43: 98 ,42: 97 ,41: 96 ,40: 95 ,39: 94 ,38: 93 ,37: 92 ,36: 91,
                  35: 90 ,34: 89 ,33: 88 ,32: 87 ,31: 86, 30: 85, 29: 84, 28: 83, 27: 82, 26: 81, 25: 80, 24: 79, 23: 78,
                  22: 77, 21: 76, 20: 75, 19: 74, 18: 73, 17: 72, 16: 71, 15: 70, 14: 69, 13: 68, 12: 67, 11: 66, 10: 65, 9: 64, 
                  8: 63, 7: 62, 6: 61, 5: 60, 4: 59, 3: 58, 2: 57, 1: 56
                  },
    '50-99':   {40: 100 ,39: 99 ,38: 98 ,37: 97 ,36: 96 ,35: 95 ,34: 94 ,33: 93 ,32: 92 ,31: 91,
                  30: 90 ,29: 89 ,28: 88 ,27: 87 ,26: 86, 25: 85, 24: 84, 23: 83, 22: 82, 21: 81, 20: 80, 19: 79, 18: 78,
                  17: 77, 16: 76, 15: 75, 14: 74, 13: 73, 12: 72, 11: 71, 10: 70, 9: 69, 8: 68, 7: 67, 6: 66, 5: 65, 4: 64, 
                  3: 63, 2: 62, 1: 61 }
    
}
    
prueba_aerobica_mujeres = {
    "20-24": {
        "16:00": 100, "16:10": 99, "16:20": 98, "16:30": 97, "16:40": 96, 
        "16:50": 95, "17:00": 94, "17:10": 93, "17:20": 92, "17:30": 91, "17:40": 90, "17:50": 89, "18:00": 88, "18:10": 87, "18:20": 86, "18:30": 85,
        "18:40": 84, "18:50": 83, "19:00": 82, "19:10": 81, "19:20": 80, "19:30": 79, "19:40": 78, "19:50": 77, "20:00": 76, "20:10": 75, "20:20": 74,
        "20:30": 73, "20:40": 72, "20:50": 71, "21:00": 70, "21:10": 69, "21:20": 68, "21:30": 67, "21:40": 66, "21:50": 65, "22:00": 64, "22:10": 63,
        "22:20": 62, "22:30": 61, "22:40": 60, "22:50": 59, "23:00": 58, "23:10": 57, "23:20": 56, "23:30": 55, "23:40": 54, "23:50": 53, "24:00": 52,
        "24:10": 51, "24:20": 50, "24:30": 49, "24:40": 48, "24:50": 47, "25:00": 46, "25:10": 45, "25:20": 44, "25:30": 43, "25:40": 42, "25:50": 41,
        "26:00": 40, "26:10": 39, "26:20": 38, "26:30": 37, "26:40": 36, "26:50": 35, "27:00": 34, "27:10": 33, "27:20": 32, "27:30": 31, "27:40": 30,
        "27:50": 29, "28:00": 28, "28:10": 27, "28:20": 26, "28:30": 25, "28:40": 24, "28:50": 23, "29:00": 22, "29:10": 21, "29:20": 20, "29:30": 19, "29:40": 18,
        "29:50": 17, "30:00": 16, "30:10": 15, "30:20": 14, "30:30": 13, "30:40": 12, "30:50": 11, "31:00": 10, "31:10": 9, "31:20": 8, "31:30": 7, "31:40": 6,
        "31:50": 5, "32:00": 4, "32:10": 3, "32:20": 2, "32:30": 1
    },
    "25-29": {
        "16:50": 100, "17:00": 99, "17:10": 98, "17:20": 97, "17:30": 96, 
        "17:30": 95, "17:40": 94, "17:50": 93, "18:00": 92, "18:10": 91, "18:20": 90, "18:30": 89, "18:40": 88, "18:50": 87, "19:00": 86, "19:10": 85,
        "19:20": 84, "19:30": 83, "19:40": 82, "19:50": 81, "20:00": 80, "20:10": 79, "20:20": 78, "20:30": 77, "20:40": 76, "20:50": 75, "21:00": 74,
        "21:10": 73, "21:20": 72, "21:30": 71, "21:40": 70, "21:50": 69, "22:00": 68, "22:10": 67, "22:20": 66, "22:30": 65, "22:40": 64, "22:50": 63,
        "23:00": 62, "23:10": 61, "23:20": 60, "23:30": 59, "23:40": 58, "23:50": 57, "24:00": 56, "24:10": 55, "24:20": 54, "24:30": 53, "24:40": 52,
        "24:50": 51, "25:00": 50, "25:10": 49, "25:20": 48, "25:30": 47, "25:40": 46, "25:50": 45, "26:00": 44, "26:10": 43, "26:20": 42, "26:30": 41,
        "26:40": 40, "26:50": 39, "27:00": 38, "27:10": 37, "27:20": 36, "27:30": 35, "27:40": 34, "27:50": 33, "28:00": 32, "28:10": 31, "28:20": 30,
        "28:30": 29, "28:40": 28, "28:50": 27, "29:00": 26, "29:10": 25, "29:20": 24, "29:30": 23, "29:40": 22, "29:50": 21, "30:00": 20, "30:10": 19, "30:10": 18,
        "30:20": 17, "30:30": 16, "30:40": 15, "30:50": 14, "31:00": 13, "31:10": 12, "31:20": 11, "31:30": 10, "31:40": 9,"31:50": 8, "32:00": 7, "32:30": 6,
        "32:40": 5, "32:50": 4, "33:00": 3, "33:10": 2, "33:20": 1
    },
    "30-34": {
        "17:40": 100, "17:50": 99, "18:00": 98, "18:10": 97, "18:20": 96, 
        "18:30": 95, "18:40": 94, "18:50": 93, "19:00": 92, "19:10": 91, "19:20": 90, "19:30": 89, "19:40": 88, "19:50": 87, "20:00": 86, "20:10": 85,
        "20:20": 84, "20:30": 83, "20:40": 82, "20:50": 81, "21:00": 80, "21:10": 79, "21:20": 78, "21:30": 77, "21:40": 76, "21:50": 75, "22:00": 74,
        "22:10": 73, "22:20": 72, "22:30": 71, "22:40": 70, "22:50": 69, "23:00": 68, "23:10": 67, "23:20": 66, "23:30": 65, "23:40": 64, "23:50": 63,
        "24:00": 62, "24:10": 61, "24:20": 60, "24:30": 59, "24:40": 58, "24:50": 57, "25:00": 56, "25:10": 55, "25:20": 54, "25:30": 53, "25:40": 52,
        "25:50": 51, "26:00": 50, "26:10": 49, "26:20": 48, "26:30": 47, "26:40": 46, "26:50": 45, "27:00": 44, "27:10": 43, "27:20": 42, "27:30": 41,
        "27:40": 40, "27:50": 39, "28:00": 38, "28:10": 37, "28:20": 36, "28:30": 35, "28:40": 34, "28:50": 33, "29:00": 32, "29:10": 31, "29:20": 30,
        "29:30": 29, "29:40": 28, "29:50": 27, "30:00": 26, "30:10": 25, "30:20": 24, "30:30": 23, "30:40": 22, "30:50": 21, "31:00": 20, "31:10": 19, "31:20": 18,
        "31:30": 17, "31:40": 16, "31:50": 15, "32:00": 14, "32:10": 13, "32:20": 12, "32:30": 11, "32:40": 10, "32:50": 9, "33:00": 8, "33:10": 7, "33:20": 6,
        "33:30": 5, "33:40": 4, "33:50": 3, "34:00": 2, "34:10": 1
    },
    
    "35-39": {
        "18:30": 100, "18:40": 99, "18:50": 98, "19:00": 97, "19:10": 96, 
        "19:20": 95, "19:30": 94, "19:40": 93, "19:50": 92, "20:00": 91, "20:10": 90, "20:20": 89, "20:30": 88, "20:40": 87, "20:50": 86, "21:00": 85,
        "21:10": 84, "21:20": 83, "21:30": 82, "21:40": 81, "21:50": 80, "22:00": 79, "22:10": 78, "22:20": 77, "22:30": 76, "22:40": 75, "22:50": 74,
        "23:00": 73, "23:10": 72, "23:20": 71, "23:30": 70, "23:40": 69, "23:50": 68, "24:00": 67, "24:10": 66, "24:20": 65, "24:30": 64, "24:40": 63,
        "24:50": 62, "25:00": 61, "25:10": 60, "25:20": 59, "25:30": 58, "25:40": 57, "25:50": 56, "26:00": 55, "26:10": 54, "26:20": 53, "26:30": 52,
        "26:40": 51, "26:50": 50, "27:00": 49, "27:10": 48, "27:20": 47, "27:30": 46, "27:40": 45, "27:50": 44, "28:00": 43, "28:10": 42, "28:20": 41,
        "28:30": 40, "28:40": 39, "28:50": 38, "29:00": 37, "29:10": 36, "29:20": 35, "29:30": 34, "29:40": 33, "29:50": 32, "30:00": 31, "30:10": 30,
        "30:20": 29, "30:30": 28, "30:40": 27, "30:50": 26, "31:00": 25, "31:10": 24, "31:20": 23, "31:30": 22, "31:40": 21, "31:50": 20, "32:00": 19, "32:10": 18,
        "32:20": 17, "32:30": 16, "32:40": 15, "32:50": 14, "33:00": 13, "33:10": 12, "33:20": 11, "33:30": 10, "33:40": 9, "33:50": 8, "34:00": 7, "34:10": 6,
        "34:20": 5, "34:30": 4, "34:40": 3, "34:50": 2, "35:00": 1
    },
    "40-44": {
        "19:20": 100, "19:30": 99, "19:40": 98, "19:50": 97, "20:00": 96, 
        "20:10": 95, "20:20": 94, "20:30": 93, "20:40": 92, "20:50": 91, "21:00": 90, "21:10": 89, "21:20": 88, "21:30": 87, "21:40": 86, "21:50": 85,
        "22:00": 84, "22:10": 83, "22:20": 82, "22:30": 81, "22:40": 80, "22:50": 79, "23:00": 78, "23:10": 77, "23:20": 76, "23:30": 75, "23:40": 74,
        "23:50": 73, "24:00": 72, "24:10": 71, "24:20": 70, "24:30": 69, "24:40": 68, "24:50": 67, "25:00": 66, "25:10": 65, "25:20": 64, "25:30": 63,
        "25:40": 62, "25:50": 61, "26:00": 60, "26:10": 59, "26:20": 58, "26:30": 57, "26:40": 56, "26:50": 55, "27:00": 54, "27:10": 53, "27:20": 52,
        "27:30": 51, "27:40": 50, "27:50": 49, "28:00": 48, "28:10": 47, "28:20": 46, "28:30": 45, "28:40": 44, "28:50": 43, "29:00": 42, "29:10": 41,
        "29:20": 40, "29:30": 39, "29:40": 38, "29:50": 37, "30:00": 36, "30:10": 35, "30:20": 34, "30:30": 33, "30:40": 32, "30:50": 31, "31:00": 30,
        "31:10": 29, "31:20": 28, "31:30": 27, "31:40": 26, "31:50": 25, "32:00": 24, "32:10": 23, "32:20": 22, "32:30": 21, "32:40": 20, "32:50": 19, "33:00": 18,
        "33:10": 17, "33:20": 16, "33:30": 15, "33:40": 14, "33:50": 13, "34:00": 12, "34:10": 11, "34:20": 10, "34:30": 9, "34:40": 8, "34:50": 7, "35:00": 6,
        "35:10": 5, "35:20": 4, "35:30": 3, "35:40": 2, "35:50": 1
    },
    "45-49": {
        "20:10": 100, "20:20": 99, "20:30": 98, "20:40": 97, "20:50": 96, "21:00": 95, "21:10": 94, "21:20": 93, "21:30": 92, "21:40": 91, "21:50": 90,
        "22:00": 89, "22:10": 88, "22:20": 87, "22:30": 86, "22:40": 85, "22:50": 84, "23:00": 83, "23:10": 82, "23:20": 81, "23:30": 80, "23:40": 79,
        "23:50": 78, "24:00": 77, "24:10": 76, "24:20": 75, "24:30": 74, "24:40": 73, "24:50": 72, "25:00": 71, "25:10": 70, "25:20": 69, "25:30": 68,
        "25:40": 67, "25:50": 66, "26:00": 65, "26:10": 64, "26:20": 63, "26:30": 62, "26:40": 61, "26:50": 60, "27:00": 59, "27:10": 58, "27:20": 57,
        "27:30": 56, "27:40": 55, "27:50": 54, "28:00": 53, "28:10": 52, "28:20": 51, "28:30": 50, "28:40": 49, "28:50": 48, "29:00": 47, "29:10": 46,
        "29:20": 45, "29:30": 44, "29:40": 43, "29:50": 42, "30:00": 41, "30:10": 40, "30:20": 39, "30:30": 38, "30:40": 37, "30:50": 36, "31:50": 35,
        "31:00": 34, "31:10": 33, "31:20": 32, "31:30": 31, "31:40": 30, "32:00": 29, "32:10": 28, "32:20": 27, "32:30": 26, "32:40": 25, "32:50": 24, "33:00": 23,
        "33:10": 22, "33:20": 21, "33:30": 20, "33:40": 19, "33:50": 18, "34:00": 17, "34:10": 16, "34:20": 15, "34:30": 14, "34:40": 13, "34:50": 12, "35:00": 11,
        "35:10": 10, "35:20": 9, "35:30": 8, "35:40": 7, "35:50": 6, "36:00": 5, "36:10": 4, "36:20": 3, "36:30": 2, "36:40": 1
    },
    "50-99": {
        "21:00": 100, "21:10": 99, "21:20": 98, "21:30": 97, "21:40": 96, "21:50": 95, "22:00": 94, "22:10": 93, "22:20": 92, "22:30": 91, "22:40": 90,
        "22:50": 89, "23:00": 88, "23:10": 87, "23:20": 86, "23:30": 85, "23:40": 84, "23:50": 83, "24:00": 82, "24:10": 81, "24:20": 80, "24:30": 79,
        "24:40": 78, "24:50": 77, "25:00": 76, "25:10": 75, "25:20": 74, "25:30": 73, "25:40": 72, "25:50": 71, "26:00": 70, "26:10": 69, "26:20": 68,
        "26:30": 67, "26:40": 66, "26:50": 65, "27:00": 64, "27:10": 63, "27:20": 62, "27:30": 61, "27:40": 60, "27:50": 59, "28:00": 58, "28:10": 57,
        "28:20": 56, "28:30": 55, "28:40": 54, "28:50": 53, "29:00": 52, "29:10": 51, "29:20": 50, "29:30": 49, "29:40": 48, "29:50": 47, "30:00": 46,
        "30:10": 45, "30:20": 44, "30:30": 43, "30:40": 42, "30:50": 41, "31:00": 40, "31:10": 39, "31:20": 38, "31:30": 37, "31:40": 36, "31:50": 35,
        "32:00": 34, "32:10": 33, "32:20": 32, "32:30": 31, "32:40": 30, "32:50": 29, "33:00": 28, "33:10": 27, "33:20": 26, "33:30": 25, "33:40": 24, "33:50": 23,
        "34:00": 22, "34:10": 21, "34:20": 20, "34:30": 19, "34:40": 18, "34:50": 17, "35:00": 16, "35:10": 15, "35:20": 14, "35:30": 13, "35:40": 12, "35:50": 11,
        "36:00": 10, "36:10": 9, "36:20": 8, "36:30": 7, "36:40": 6, "36:50": 5, "37:00": 4, "37:10": 3, "37:20": 2, "37:30": 1
    }
}

prueba_aerobica_hombres = {
    "20-24": {
        "15:00": 100, "15:10": 99, "15:20": 98, "15:30": 97, "15:40": 96, 
        "15:50": 95, "16:00": 94, "16:10": 93, "16:20": 92, "16:30": 91, "16:40": 90, "16:50": 89, "17:00": 88, "17:10": 87, "17:20": 86, "17:30": 85,
        "17:40": 84, "17:50": 83, "18:00": 82, "18:10": 81, "18:20": 80, "18:30": 79, "18:40": 78, "18:50": 77, "19:00": 76, "19:10": 75, "19:20": 74,
        "19:30": 73, "19:40": 72, "19:50": 71, "20:00": 70, "20:10": 69, "20:20": 68, "20:30": 67, "20:40": 66, "20:50": 65, "21:00": 64, "21:10": 63,
        "21:20": 62, "21:30": 61, "21:40": 60, "21:50": 59, "22:00": 58, "22:10": 57, "22:20": 56, "22:30": 55, "22:40": 54, "22:50": 53, "23:00": 52,
        "23:10": 51, "23:20": 50, "23:30": 49, "23:40": 48, "23:50": 47, "24:00": 46, "24:10": 45, "24:20": 44, "24:30": 43, "24:40": 42, "24:50": 41,
        "25:00": 40, "25:10": 39, "25:20": 38, "25:30": 37, "25:40": 36, "25:50": 35, "26:00": 34, "26:10": 33, "26:20": 32, "26:30": 31, "26:40": 30,
        "26:50": 29, "27:00": 28, "27:10": 27, "27:20": 26, "27:30": 25, "27:40": 24, "27:50": 23, "28:00": 22, "28:10": 21, "28:20": 20, "28:30": 19, "28:40": 18,
        "28:50": 17, "29:00": 16, "29:10": 15, "29:20": 14, "29:30": 13, "29:40": 12, "29:50": 11, "30:00": 10, "30:10": 9, "30:20": 8, "30:30": 7, "30:40": 6,
        "30:50": 5, "31:00": 4, "31:10": 3, "31:20": 2, "31:30": 1 
    }, #hasta aca
    "25-29": {
        "15:50": 100, "16:00": 99, "16:10": 98, "16:20": 97, "16:30": 96, 
        "16:30": 95, "16:40": 94, "16:50": 93, "17:00": 92, "17:10": 91, "17:20": 90, "17:30": 89, "17:40": 88, "17:50": 87, "18:00": 86, "18:10": 85,
        "18:20": 84, "18:30": 83, "18:40": 82, "18:50": 81, "19:00": 80, "19:10": 79, "19:19": 78, "19:30": 77, "19:40": 76, "19:50": 75, "20:00": 74,
        "20:10": 73, "20:20": 72, "20:30": 71, "20:40": 70, "20:50": 69, "21:00": 68, "21:10": 67, "21:20": 66, "21:30": 65, "21:40": 64, "21:50": 63,
        "22:00": 62, "22:10": 61, "22:20": 60, "22:30": 59, "22:40": 58, "22:50": 57, "23:00": 56, "23:10": 55, "23:20": 54, "23:30": 53, "23:40": 52,
        "23:50": 51, "24:00": 50, "24:10": 49, "24:20": 48, "24:30": 47, "24:40": 46, "24:50": 45, "25:00": 44, "25:10": 43, "25:20": 42, "25:30": 41,
        "25:40": 40, "25:50": 39, "26:00": 38, "26:10": 37, "26:20": 36, "26:30": 35, "26:40": 34, "26:50": 33, "27:00": 32, "27:10": 31, "27:20": 30,
        "27:30": 29, "27:40": 28, "27:50": 27, "28:00": 26, "28:10": 25, "28:20": 24, "28:30": 23, "28:40": 22, "28:50": 21, "29:00": 20, "29:10": 19, "29:10": 18,
        "29:20": 17, "29:30": 5, "29:40": 15, "29:50": 14, "30:00": 13, "30:10": 12, "30:20": 11, "30:30": 10, "30:40": 9,"30:50": 8, "31:00": 7, "31:30": 6,
        "31:40": 5, "31:50": 4, "32:00": 3, "32:10": 2, "32:20": 1
    },
    "30-34": {
        "16:40": 100, "16:50": 99, "17:00": 98, "17:10": 97, "17:20": 96, 
        "17:30": 95, "17:40": 94, "17:50": 93, "18:00": 92, "18:10": 91, "18:20": 90, "18:30": 89, "18:40": 88, "18:50": 87, "19:00": 86, "19:10": 85,
        "19:20": 84, "19:30": 83, "19:40": 82, "19:50": 81, "20:00": 80, "20:10": 79, "20:20": 78, "20:30": 77, "20:40": 76, "20:50": 75, "21:00": 74,
        "21:10": 73, "21:20": 72, "21:30": 71, "21:40": 70, "21:50": 69, "22:00": 68, "22:10": 67, "22:20": 66, "22:30": 65, "22:40": 64, "22:50": 63,
        "23:00": 62, "23:10": 61, "23:20": 60, "23:30": 59, "23:40": 58, "23:50": 57, "24:00": 56, "24:10": 55, "24:20": 54, "24:30": 53, "24:40": 52,
        "24:50": 51, "25:00": 50, "25:10": 49, "25:20": 48, "25:30": 47, "25:40": 46, "25:50": 45, "26:00": 44, "26:10": 43, "26:20": 42, "26:30": 41,
        "26:40": 40, "26:50": 39, "27:00": 38, "27:10": 37, "27:20": 36, "27:30": 35, "27:40": 34, "27:50": 33, "28:00": 32, "28:10": 31, "28:20": 30,
        "28:30": 29, "28:40": 28, "28:50": 27, "29:00": 26, "29:10": 25, "29:20": 24, "29:30": 23, "29:40": 22, "29:50": 21, "30:00": 20, "30:10": 19, "30:20": 18,
        "30:30": 17, "30:40": 16, "30:50": 15, "31:00": 14, "31:10": 13, "31:20": 12, "31:30": 11, "31:40": 10, "31:50": 9, "32:00": 8, "32:10": 7, "32:20": 6,
        "32:30": 5, "32:40": 4, "32:50": 3, "33:00": 2, "33:10": 1
    },
    
    "35-39": {
        "17:30": 100, "17:40": 99, "17:50": 98, "18:00": 97, "18:10": 96, 
        "18:20": 95, "18:30": 94, "18:40": 93, "18:50": 92, "19:00": 91, "19:10": 90, "19:19": 89, "19:30": 88, "19:40": 87, "19:50": 86, "20:00": 85,
        "20:10": 84, "20:20": 83, "20:30": 82, "20:40": 81, "20:50": 80, "21:00": 79, "21:10": 78, "21:20": 77, "21:30": 76, "21:40": 75, "21:50": 74,
        "22:00": 73, "22:10": 72, "22:20": 71, "22:30": 70, "22:40": 69, "22:50": 68, "23:00": 67, "23:10": 66, "23:20": 65, "23:30": 64, "23:40": 63,
        "23:50": 62, "24:00": 61, "24:10": 60, "24:20": 59, "24:30": 58, "24:40": 57, "24:50": 56, "25:00": 55, "25:10": 54, "25:20": 53, "25:30": 52,
        "25:40": 51, "25:50": 50, "26:00": 49, "26:10": 48, "26:20": 47, "26:30": 46, "26:40": 45, "26:50": 44, "27:00": 43, "27:10": 42, "27:20": 41,
        "27:30": 40, "27:40": 39, "27:50": 38, "28:00": 37, "28:10": 36, "28:20": 35, "28:30": 34, "28:40": 33, "28:50": 32, "30:00": 31, "30:10": 30,
        "30:20": 29, "30:30": 28, "30:40": 27, "30:50": 26, "31:00": 25, "31:10": 24, "31:20": 23, "31:30": 22, "31:40": 21, "31:50": 20, "32:00": 19, "32:10": 18,
        "32:20": 17, "32:30": 16, "32:40": 15, "32:50": 14, "33:00": 13, "33:10": 12, "33:20": 11, "33:30": 10, "33:40": 9, "33:50": 8, "34:00": 7, "34:10": 6,
        "34:20": 5, "34:30": 4, "34:40": 3, "34:50": 2, "35:00": 1
    },
    "40-44": {
        "18:20": 100, "18:30": 99, "18:40": 98, "18:50": 97, "19:00": 96, 
        "19:10": 95, "19:19": 94, "19:30": 93, "19:40": 92, "19:50": 91, "20:00": 90, "20:10": 89, "20:20": 88, "20:30": 87, "20:40": 86, "20:50": 85,
        "21:00": 84, "21:10": 83, "21:20": 82, "21:30": 81, "21:40": 80, "21:50": 79, "22:00": 78, "22:10": 77, "22:20": 76, "22:30": 75, "22:40": 74,
        "22:50": 73, "23:00": 72, "23:10": 71, "23:20": 70, "23:30": 69, "23:40": 68, "23:50": 67, "24:00": 66, "24:10": 65, "24:20": 64, "24:30": 63,
        "24:40": 62, "24:50": 61, "25:00": 60, "25:10": 59, "25:20": 58, "25:30": 57, "25:40": 56, "25:50": 55, "26:00": 54, "26:10": 53, "26:20": 52,
        "26:30": 51, "26:40": 50, "26:50": 49, "27:00": 48, "27:10": 47, "27:20": 46, "27:30": 45, "27:40": 44, "27:50": 43, "28:00": 42, "28:10": 41,
        "28:20": 40, "28:30": 39, "28:40": 38, "28:50": 37, "29:00": 36, "29:10": 35, "29:20": 34, "29:29": 33, "29:40": 32, "29:50": 31, "30:00": 30,
        "30:10": 29, "30:20": 28, "30:30": 27, "30:40": 26, "30:50": 25, "31:00": 24, "31:10": 23, "31:20": 22, "31:30": 21, "31:40": 20, "31:50": 19, "32:00": 18,
        "32:10": 17, "32:20": 16, "32:30": 15, "32:40": 14, "32:50": 13, "33:00": 12, "33:10": 11, "33:20": 10, "33:30": 9, "33:40": 8, "33:50": 7, "34:00": 6,
        "34:10": 5, "34:20": 4, "34:30": 3, "34:40": 2, "34:50": 1
    },
    "45-49": {
        "19:10": 100, "19:20": 99, "19:30": 98, "19:40": 97, "19:50": 96, "20:00": 95, "20:10": 94, "20:20": 93, "20:30": 92, "20:40": 91, "20:50": 90,
        "21:00": 89, "21:10": 88, "21:20": 87, "21:30": 86, "21:40": 85, "21:50": 84, "22:00": 83, "22:10": 82, "22:20": 81, "22:30": 80, "22:40": 79,
        "22:50": 78, "23:00": 77, "23:10": 76, "23:20": 75, "23:30": 74, "23:40": 73, "23:50": 72, "24:00": 71, "24:10": 70, "24:20": 69, "24:30": 68,
        "24:40": 67, "24:50": 66, "25:00": 65, "25:10": 64, "25:20": 63, "25:30": 62, "25:40": 61, "25:50": 60, "26:00": 59, "26:10": 58, "26:20": 57,
        "26:30": 56, "26:40": 55, "26:50": 54, "27:00": 53, "27:10": 52, "27:20": 51, "27:30": 50, "27:40": 49, "27:50": 48, "28:00": 47, "28:10": 46,
        "28:20": 45, "28:30": 44, "28:40": 43, "28:50": 42, "29:00": 41, "29:10": 40, "29:20": 39, "29:30": 38, "29:40": 37, "29:50": 36, "30:00": 35,
        "30:10": 34, "30:20": 33, "30:30": 32, "30:40": 31, "30:50": 30, "31:00": 29, "31:10": 28, "31:20": 27, "31:30": 26, "31:40": 25, "31:50": 24, "32:00": 23,
        "32:10": 22, "32:20": 21, "32:30": 20, "32:40": 19, "32:50": 18, "33:00": 17, "33:10": 16, "33:20": 15, "33:30": 14, "33:40": 13, "33:50": 12, "34:00": 11,
        "34:10": 10, "34:20": 9, "34:30": 8, "34:40": 7, "34:50": 6, "35:00": 5, "35:10": 4, "35:20": 3, "35:30": 2, "35:40": 1
    },
    "50-99": {
        "20:00": 100, "20:10": 99, "20:20": 98, "20:30": 97, "20:40": 96, "20:50": 95, "21:00": 94, "21:10": 93, "21:20": 92, "21:30": 91, "21:40": 90,
        "21:50": 89, "22:00": 88, "22:10": 87, "22:20": 86, "22:30": 85, "22:40": 84, "22:50": 83, "23:00": 82, "23:10": 81, "23:20": 80, "23:30": 79,
        "23:40": 78, "23:50": 77, "24:00": 76, "24:10": 75, "24:20": 74, "24:30": 73, "24:40": 72, "24:50": 71, "25:00": 70, "25:10": 69, "25:20": 68,
        "25:30": 67, "25:40": 66, "25:50": 65, "26:00": 64, "26:10": 63, "26:20": 62, "26:30": 61, "26:40": 60, "26:50": 59, "27:00": 58, "27:10": 57,
        "27:20": 56, "27:30": 55, "27:40": 54, "27:50": 53, "28:00": 52, "28:10": 51, "28:20": 50, "28:30": 49, "28:40": 48, "28:50": 47, "29:00": 46,
        "29:10": 45, "29:20": 44, "29:30": 43, "29:40": 42, "29:50": 41, "30:00": 40, "30:10": 39, "30:20": 38, "30:30": 37, "30:40": 36, "30:50": 35,
        "31:00": 34, "31:10": 33, "31:20": 32, "31:30": 31, "31:40": 30, "31:50": 29, "32:00": 28, "32:10": 27, "32:20": 26, "32:30": 25, "32:40": 24, "32:50": 23,
        "33:00": 22, "33:10": 21, "33:20": 20, "33:30": 19, "33:40": 18, "33:50": 17, "34:00": 16, "34:10": 15, "34:20": 14, "34:30": 13, "34:40": 12, "34:50": 11,
        "35:00": 10, "35:10": 9, "35:20": 8, "35:30": 7, "35:40": 6, "35:50": 5, "36:00": 4, "36:10": 3, "36:20": 2, "36:30": 1
    }
}

def calcular_prueba(genero, edad, prueba_aerobica):
    # Buscar el rango de edad correspondiente
    if edad >= 20 and edad <= 24:
        rango_edad = "20-24"
    elif edad >= 25 and edad <= 29:
        rango_edad = "25-29"
    elif edad >= 30 and edad <= 34:
        rango_edad = "30-34"
    elif edad >= 35 and edad <= 39:
        rango_edad = "35-39"
    elif edad >= 40 and edad <= 44:
        rango_edad = "40-44"
    elif edad >= 45 and edad <= 49:
        rango_edad = "45-49"
    elif edad >= 50 and edad <= 54:
        rango_edad = "50-54"
    elif edad >= 55 and edad <= 99:
        rango_edad = "55-99"
    else:
        return "Rango de edad inválido"  # Si la edad no está en ningún rango, devolver None
    
    # Buscar la calificación correspondiente al género, rango de edad y tiempo
    if genero == "F":
        calificacion_aerobica = prueba_aerobica_mujeres.get(rango_edad, {}).get(prueba_aerobica)
    elif genero == "M":
        calificacion_aerobica = prueba_aerobica_hombres.get(rango_edad, {}).get(prueba_aerobica)
    else:
        return None  # Si el género no es "Femenino" o "Masculino", devolver None
    
    return calificacion_aerobica

def calcular_nota(notas_mujeres, notas_hombres, genero, edad, abdominales, enviar_resultados):
    if genero == 'F':
        data = notas_mujeres
    elif genero == 'M':
        data = notas_hombres
    else:
        return "Género inválido"
    
    if 20 <= edad <= 24:
        rango_edad = '20-24'
    elif 25 <= edad <= 29:
        rango_edad = '25-29'
    elif 30 <= edad <= 34:
        rango_edad = '30-34'
    elif 35 <= edad <= 39:
        rango_edad = '35-39'
    elif 40 <= edad <= 44:
        rango_edad = '40-44'
    elif 45 <= edad <= 49:
        rango_edad = '45-49'
    elif 50 <= edad <= 99:
        rango_edad = '50-99'
    else:
        return "Rango de edad inválido"
    
    #if edad not in data:
    # return "Rango de edad inválido"
    #print(type(data[edad]))

    if abdominales not in data[rango_edad]:
        return "Número de abdominales inválido para el rango de edad y género especificados"
        #print("invalido")
    calificacion = data[rango_edad][abdominales]
    if calificacion >= 71:
        calificacion=calificacion#enviar_resultados(calificacion)
    #print(calificacion)   
    return calificacion

def calcular_flexiones(notas_mujeres_flex, notas_hombres_flex, genero, edad, flexiones, enviar_resultados):
    if genero == 'F':
        data = notas_mujeres_flex
    elif genero == 'M':
        data = notas_hombres_flex
    else:
        return "Género inválido"
    
    if 20 <= edad <= 24:
        rango_edad = '20-24'
    elif 25 <= edad <= 29:
        rango_edad = '25-29'
    elif 30 <= edad <= 34:
        rango_edad = '30-34'
    elif 35 <= edad <= 39:
        rango_edad = '35-39'
    elif 40 <= edad <= 44:
        rango_edad = '40-44'
    elif 45 <= edad <= 49:
        rango_edad = '45-49'
    elif 50 <= edad <= 99:
        rango_edad = '50-99'
    else:
        return "Rango de edad inválido"
    
    if flexiones not in data[rango_edad]:
        return "Número de flexiones es inválido para el rango de edad y género especificados"
    calificacion_flexiones = data[rango_edad][flexiones]
    if calificacion_flexiones >= 71:
        calificacion_flexiones = calificacion_flexiones
    #print(f"calificacion_flexiones: {calificacion_flexiones}")
    return calificacion_flexiones

def calculo_total(calificacion_flexiones, calificacion, calificacion_aerobica):
    # sourcery skip: hoist-similar-statement-from-if, hoist-statement-from-if, move-assign-in-block, remove-unnecessary-cast

    calificacion_total = 0
    calificacion_total = ((calificacion_flexiones or 0) + (calificacion or 0) + (calificacion_aerobica or 0)) / 3
    if calificacion_total >= 71:
        calificacion_total= int(calificacion_total)
        estado_p = 'APROBADA' 
    else:
        calificacion_total= int(calificacion_total)
        estado_p = "REPROBADO"
        
    return calificacion_total, estado_p

def enviar_resultados(correo, nombre, imc, estado, metabolismo_basal,calificacion, calificacion_flexiones, calificacion_aerobica, calificacion_total, estado_p):
    asunto = f"Resultados de cálculo de IMC y metabolismo basal para {nombre}"
    mensaje = f"Hola {nombre},\n\n Tu índice de masa corporal es: {imc:.2f}\n Abdominales:  {calificacion}\n Flexiones {calificacion_flexiones}\n Prueba Aerobica de 3200 mts. {calificacion_aerobica}  \n Su nota es {calificacion_total} asi que usted esta {estado_p} .\n Te encuentras en un estado de {estado}. Tu metabolismo basal es {metabolismo_basal:.2f} calorías por día.\n\nSaludos,\nTu aplicación de cálculo de IMC y metabolismo basal"
    send_mail(asunto, mensaje, 'tu_correo@example.com', [correo])



def calcular_imc_view(request):   # sourcery skip: extract-method
    if request.method == 'POST':
        form = PersonaForm(request.POST)
        if form.is_valid():
            persona = form.save(commit=False)
            calificacion = calcular_nota(notas_mujeres, notas_hombres, persona.genero, persona.edad, persona.abdominales, enviar_resultados)
            calificacion_flexiones = calcular_flexiones(notas_mujeres_flex, notas_hombres_flex, persona.genero, persona.edad, persona.flexiones, enviar_resultados)
            calificacion_aerobica = calcular_prueba(persona.genero, persona.edad, persona.prueba_aerobica)
            #print(f"calificacion_flexiones: {calificacion_flexiones}")
            calificacion_total, estado_p = calculo_total(calificacion_flexiones, calificacion, calificacion_aerobica)
            imc = calcular_imc(persona.peso, persona.altura)
            estado = determinar_estado(imc, persona.edad)
            metabolismo_basal = calcular_metabolismo_basal(persona.peso, persona.altura, persona.edad, persona.genero)
            persona.imc = imc
            persona.estado = estado
            persona.estado_p = estado_p
            persona.metabolismo_basal = metabolismo_basal
            persona.calificacion_total = calificacion_total
            persona.save()
            enviar_resultados(persona.correo, persona.nombre, imc, estado, metabolismo_basal, calificacion, calificacion_flexiones, calificacion_aerobica, calificacion_total, estado_p)
            
            
            
            return redirect('success')
    else:
        form = PersonaForm()
    return render(request, 'calcular_imc.html', {'form': form})

def success_view(request):
    # Obtener todas las personas registradas en la base de datos
    personas = Persona.objects.all()
    return render(request, 'success.html', {'personas': personas})